<!DOCTYPE html>
<html>
	<head>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script>
			var alluids = jQuery.parseJSON( {{alluids|tojson|safe}} );
			console.log(alluids)

			$(document).ready(function() {
				for (var i = 0; i < alluids.length; i++)
				{
					$("#TGids").append(alluids[i] + '<br/>');
				}
			  
		  });
		</script>
	</head>

	<body>
	<p id="TGids"></p>
	<p id="fbids">Hi</p>

	<div id="fb-root"></div>
	<script>
	var friendlist = [];

	window.fbAsyncInit = function() {
	FB.init({
	  appId      : '1423477091234772',
	  status     : true, // check login status
	  cookie     : true, // enable cookies to allow the server to access the session
	  xfbml      : true  // parse XFBML
	});
	// see here: https://developers.facebook.com/docs/facebook-login/login-flow-for-web/

	FB.Event.subscribe('auth.authResponseChange', function(response) {
	FB.api(
	          "/me?fields=friends.fields(name)",
	          function (response) {
	            if (response && !response.error) {
				  list = response["friends"]["data"];
				  for (var i=0; i < list.length; i++)
				  {
					  friendlist.push(list[i]["name"]);
					  $(document).ready(function() {
						  $("#fbids").append(list[i]["id"] + '<br/>');
					  });
				  }
	              
	            }
	          }
	      );
	  });
	};
	(function(d){
	 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
	 if (d.getElementById(id)) {return;}
	 js = d.createElement('script'); js.id = id; js.async = true;
	 js.src = "https://connect.facebook.net/en_US/all.js";
	 ref.parentNode.insertBefore(js, ref);
	}(document));

	</script>	
	</body>

</html>
